"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _angular_core=require("@angular/core"),_angular_platformBrowser=require("@angular/platform-browser"),AppComponent=function(){function t(){this.name="Angular",this.people=[],this.people=[{firstName:"James",lastName:"Dean"},{firstName:"John",lastName:"Smith"},{firstName:"Jane",lastName:"Doe"}]}return t.prototype.ngOnInit=function(){console.log("called")},t}();AppComponent.decorators=[{type:_angular_core.Component,args:[{selector:"app",template:'\n    <h1>Hello {{name}}</h1>\n\n    <table>\n        <thead>\n            <tr>\n               <td sort="firstName">First Name</td>\n               <td sort="lastName">Last Name</td>\n            </tr>\n        </thead>\n        <tbody>\n            <tr *ngFor="let person of people">\n                <td>{{ person.firstName }}</td>\n                <td>{{ person.lastName }}</td>\n            </tr>\n        </tbody>\n    </table>\n  '}]}],AppComponent.ctorParameters=function(){return[]};var ChangeDetector=function(){function t(){}return t.refChanged=function(t,r){return t!==r||(null!==t||null!==r)&&(null===t||null===r||(void 0!==t||void 0!==r)&&(void 0===t||void 0===r))},t.isArray=function(t){return t.constructor===[].constructor},t.isObject=function(t){return t.constructor==={}.constructor},t.arrayChanged=function(t,r){if(t.length!=r.length)return!0;for(var e=0;e<t.length;++e)if(t[e]!==r[e])return!0;return!1},t.objChanged=function(t,r){if(Object.keys(t).length!=Object.keys(r).length)return!0;for(var e in t)if(t[e]!==r[e])return!0;return!1},t.referenceChanged=function(r,e){return t.refChanged(r,e)},t.propertyChanged=function(r,e){return t.isArray(r)&&t.isArray(e)?t.arrayChanged(r,e):!(!t.isObject(r)||!t.isObject(e))&&t.objChanged(r,e)},t}(),SortService=function(){function t(){this.parameters=[]}return t.prototype.configure=function(t){this.options=t},t.prototype.register=function(t){var r=this.parameters.find(function(r){return r.name===t});return r||(r={name:t,asc:void 0,priority:void 0},this.parameters.push(r)),r},t.prototype.clear=function(){this.parameters.forEach(function(t){t.asc=void 0,t.priority=void 0})},t.prototype.update=function(t,r){var e=this.parameters.find(function(r){return r.name===t});void 0===e.asc&&(e.priority=this.parameters.map(function(t){return t.priority||0}).reduce(function(t,r){return r>t?r:t},0)+1),void 0===r&&(e.priority=void 0),e.asc=r},t.prototype.sort=function(t){if(null===this.tmp&&null===t)return t;if(void 0===this.tmp&&void 0===t)return t;if(!ChangeDetector.referenceChanged(this.tmp,t)&&!ChangeDetector.propertyChanged(this.tmp,t))return t;var r=this.parameters.filter(function(t){return void 0!==t.priority}).sort(function(t,r){return t.priority<r.priority?-1:t.priority>r.priority?1:0}),t=t.sort(function(t,e){var o=0;return r.forEach(function(r){if(0===o){var n=r.asc?1:-1,i=t[r.name],a=e[r.name];i<a&&(o=-1*n),i>a&&(o=1*n)}}),o});return this.tmp=t.slice(),this.tmp},t}();SortService.decorators=[{type:_angular_core.Injectable}],SortService.ctorParameters=function(){return[]};var SortComponent=function(){function t(t,r){this.sortService=t,this.elementRef=r,void 0===t.options&&t.configure({noneClass:"glyphicon-sort",ascendingClass:"glyphicon-triangle-top",descendingClass:"glyphicon-triangle-bottom"})}return t.prototype.ngOnInit=function(){var t=this.elementRef.nativeElement.getAttribute("sort");this.sortParameter=this.sortService.register(t)},t.prototype.onSortClick=function(t){var r=this.nextSort(this.sortParameter.asc);t.ctrlKey||this.sortService.clear(),this.sortService.update(this.sortParameter.name,r)},Object.defineProperty(t.prototype,"sortClass",{get:function(){return void 0===this.sortParameter.asc?this.sortService.options.noneClass:!0===this.sortParameter.asc?this.sortService.options.ascendingClass:!1===this.sortParameter.asc?this.sortService.options.descendingClass:void 0},enumerable:!0,configurable:!0}),t.prototype.nextSort=function(t){return void 0===t||!0!==t&&void 0},t}();SortComponent.decorators=[{type:_angular_core.Component,args:[{selector:"[sort]",template:'\n      <ng-content></ng-content>\n      <span class="glyphicon" [ngClass]="sortClass"></span>\n    ',styles:[]}]}],SortComponent.ctorParameters=function(){return[{type:SortService},{type:_angular_core.ElementRef}]},SortComponent.propDecorators={onSortClick:[{type:_angular_core.HostListener,args:["click",["$event"]]}]};var SortPipe=function(){function t(t){this.sortService=t}return t.prototype.transform=function(t){return this.sortService.sort(t)},t}();SortPipe.decorators=[{type:_angular_core.Pipe,args:[{name:"sort",pure:!1}]}],SortPipe.ctorParameters=function(){return[{type:SortService,decorators:[{type:_angular_core.Inject,args:[SortService]}]}]};var AppModule=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[]}},t}();AppModule.decorators=[{type:_angular_core.NgModule,args:[{imports:[_angular_platformBrowser.BrowserModule],declarations:[AppComponent,SortComponent,SortPipe],exports:[AppComponent,SortComponent,SortPipe],providers:[SortService]}]}],AppModule.ctorParameters=function(){return[]},exports.AppModule=AppModule,exports.SortService=SortService,exports.ɵa=AppComponent,exports.ɵb=SortComponent,exports.ɵc=SortPipe;